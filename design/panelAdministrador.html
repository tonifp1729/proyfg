<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Panel de Administrador</title>
        <link rel="stylesheet" href="estilo.css"> <!-- Se debe usar la misma hoja de estilos que el panel de usuario -->
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Sidebar fijo -->
        <div class="sidebar">
            <h2>Menú</h2>
            <ul>
                <li><a href="#" onclick="mostrarSeccion('alta-usuarios'); ocultarBienvenida();">Alta de Usuarios</a></li>
                <li><a href="#" onclick="mostrarSeccion('lista-usuarios'); ocultarBienvenida();">Lista de Usuarios</a></li>
                <li><a href="#" onclick="mostrarSeccion('alta-curso'); ocultarBienvenida();">Alta de Curso Académico</a></li>
                <li><a href="#" onclick="mostrarSeccion('listar-cursos'); ocultarBienvenida();">Lista de Cursos Académicos</a></li>
            </ul>
            <div class="logout">
                <a href="#">Cerrar Sesión</a>
            </div>
        </div>

        <!-- Área principal -->
        <div class="main-content">
            <!-- Mensaje de bienvenida -->
            <div id="bienvenida">
                <h1>Bienvenido, Administrador</h1>
                <p>Esta es tu vista principal, desde aquí puedes gestionar las solicitudes de ausencia y estadísticas.</p>
            </div>

            <!-- Sección para alta de solicitud de usuario -->
            <section id="alta-usuarios" class="content-section" style="display: none;">
                <h2>Alta de Solicitud</h2>
                <p>Formulario para registrar un nuevo usuario.</p>
                
                <!-- Formulario para registrar usuario (usar el mismo id "form-usuario" del panel de usuario) -->
                <form >
                    <label>Correo Electrónico:</label>
                    <input type="email" id="email" name="email" required placeholder="ejemplo@dominio.com">
                
                    <label>Confirmar Correo Electrónico:</label>
                    <input type="email" id="confirmar-email" name="confirmar-email" required placeholder="ejemplo@dominio.com" oninput="validarCorreo()">
                
                    <!-- Mensaje de error en caso de que los correos no coincidan -->
                    <p id="mensaje-error">Los correos electrónicos no coinciden.</p> 
                </form>
                <div><button class="tamanio" type="submit">Crear Cuenta</button></div>
            </section>

            <!-- Sección para listar usuarios -->
            <section id="lista-usuarios" class="content-section" style="display: none;">
                <h2>Lista de Usuarios</h2>
                <p>Listado de usuarios del sistema.</p>

                <!-- Tabla para mostrar la lista de usuarios -->
                <table style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Apellidos</th>
                            <th>Correo</th>
                            <th>Accciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Juan</td>
                            <td>Perez Serrano</td>
                            <td>juanperezserrano.guadalupe@profesorado.fundacionloyola.net</td>
                            <td>
                                <!-- Icono de Modificar con una imagen personalizada -->
                                <a href="#" title="Modificar">
                                    <img src="iconos/modificar.svg" alt="Modificar" width="24" height="24">
                                </a>
                                <!-- Icono de Borrar con una imagen personalizada -->
                                <a href="#" title="Borrar">
                                    <img src="iconos/borrar.svg" alt="Borrar" width="24" height="24">
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>Ana</td>
                            <td>Martinez Almonte</td>
                            <td>anamartinezalmonte.guadalupe@profesorado.fundacionloyola.net</td>
                            <td>
                                <!-- Icono de Modificar con una imagen personalizada -->
                                <a href="#" title="Modificar">
                                    <img src="iconos/modificar.svg" alt="Modificar" width="24" height="24">
                                </a>
                                <!-- Icono de Borrar con una imagen personalizada -->
                                <a href="#" title="Borrar">
                                    <img src="iconos/borrar.svg" alt="Borrar" width="24" height="24">
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <!-- Sección para alta de curso académico -->
            <section id="alta-curso" class="content-section" style="display: none;">
                <h2>Alta de Curso Académico</h2>
                <p>Formulario para registrar un nuevo curso académico.</p>
                
                <!-- Formulario para registrar curso académico -->
                <form id="form-curso">
                    <label>Fecha de Inicio:</label>
                    <input type="date" id="fechaInicio" name="fechaInicio" required>
            
                    <label>Fecha de Fin:</label>
                    <input type="date" id="fechaFin" name="fechaFin" required>

                    <button class="tamanio" type="submit">Crear Curso</button>
                </form>
            </section>

            <!-- Sección para listar cursos académicos -->
            <section id="listar-cursos" class="content-section" style="display: none;">
                <h2>Curso Activo</h2>
                <p id="curso-activo">2024/2025</p> <!-- Muestra el curso activo -->

                <h3>Historial de Cursos Académicos</h3>
                <table id="tabla-cursos" style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Año Académico</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aquí se agregarán los cursos anteriores dinámicamente -->
                    </tbody>
                </table>
            </section>
        </div>

        <script>
            function ocultarBienvenida() {
                const bienvenida = document.getElementById('bienvenida');
                bienvenida.style.display = 'none'; // Oculta el div de bienvenida
            }

            function mostrarConfirmacionCorreo() {
                    const email = document.getElementById('email').value;
                    const confirmacionCorreo = document.getElementById('confirmacion-correo');
                    
                    // Mostrar el campo de confirmación solo cuando se empieza a escribir en el campo de correo
                    if (email.length > 0) {
                        confirmacionCorreo.style.display = 'block';
                    } else {
                        confirmacionCorreo.style.display = 'none';
                    }
                }
            
            function validarCorreo() {
                const email = document.getElementById('email').value;
                const confirmarEmail = document.getElementById('confirmar-email').value;
                const mensajeError = document.getElementById('mensaje-error');
                    
                if (email !== confirmarEmail) {
                    mensajeError.style.display = 'block';
                } else {
                    mensajeError.style.display = 'none';
                }
            }
        
            // Array para almacenar los usuarios registrados
            const usuarios = [];
        
            // Función para mostrar la sección correspondiente
            function mostrarSeccion(seccionId) {
                // Ocultar todas las secciones
                const secciones = document.querySelectorAll('.content-section');
                secciones.forEach(seccion => seccion.style.display = 'none');
        
                // Mostrar la sección seleccionada
                document.getElementById(seccionId).style.display = 'block';
        
                // Si se muestra la lista de usuarios, actualizar la tabla
                if (seccionId === 'lista-usuarios') {
                    actualizarTablaUsuarios();
                }
            }

            // Función para manejar el formulario de registro de curso
            document.getElementById('form-curso').addEventListener('submit', function(e) {
                e.preventDefault();

                const fechaInicio = document.getElementById('fechaInicio').value;
                const fechaFin = document.getElementById('fechaFin').value;
                const nuevoCurso = `${new Date(fechaInicio).getFullYear()}/${new Date(fechaFin).getFullYear()}`;

                // Añadir el nuevo curso directamente a la tabla de historial
                agregarCursoATabla(nuevoCurso);

                // Limpiar el formulario después de enviar
                document.getElementById('form-curso').reset();
            });

            // Función para agregar un curso directamente a la tabla
            function agregarCursoATabla(curso) {
                const tbody = document.querySelector('#tabla-cursos tbody');
                const fila = document.createElement('tr');
                fila.innerHTML = `<td>${curso}</td>`;
                tbody.appendChild(fila); // Añadir el curso como una nueva fila en la tabla
            }

            // Función para mostrar la sección correspondiente
            function mostrarSeccion(seccionId) {
                // Ocultar todas las secciones
                const secciones = document.querySelectorAll('.content-section');
                secciones.forEach(seccion => seccion.style.display = 'none');

                // Mostrar la sección seleccionada
                document.getElementById(seccionId).style.display = 'block';
            }
        </script>   
    </body>
</html>