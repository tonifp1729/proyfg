<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Panel de Moderador</title>
        <link rel="stylesheet" href="estilo.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Sidebar fijo -->
        <div class="sidebar">
            <h2>Menú</h2>
            <ul>
                <li><a href="#" onclick="mostrarSeccion('ver-lista'); ocultarBienvenida();">Ver Lista de Solicitudes</a></li>
                <li><a href="#" onclick="mostrarSeccion('comprobar-estadisticas'); ocultarBienvenida();">Comprobar Estadísticas</a></li>
            </ul>
            <div class="logout">
                <a href="#">Cerrar Sesión</a>
            </div>
        </div>

        <!-- Área principal -->
        <div class="main-content">
            <!-- Mensaje de bienvenida -->
            <div id="bienvenida">
                <h1>Bienvenido, Moderador</h1>
                <p>Esta es tu vista principal, desde aquí puedes gestionar las solicitudes de ausencia y estadísticas.</p>
            </div>

            <!-- Sección Ver Lista de Solicitudes -->
            <section id="ver-lista" class="content-section" style="display: none;">
                <h2>Ver Lista de Solicitudes</h2>
                <p>Aquí puedes ver todas las solicitudes de ausencia.</p>

                <!-- Tabla con las solicitudes -->
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Número Solicitud</th>
                            <th>Docente</th>
                            <th>Asunto</th>
                            <th>Fecha Inicio</th>
                            <th>Fecha Fin</th>
                            <th>Estado</th>
                            <th>Activa</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-color="verde">
                            <td>
                                <a href="#" title="Consultar" onclick="mostrarDetallesSolicitud('verde');">
                                    <img src="iconos/consultar.svg" alt="Consultar" width="24" height="24">
                                </a>
                            </td>
                            <td>20241002_01</td>
                            <td>Juan Pérez</td>
                            <td>Revisión Médica</td>
                            <td>2024-10-12</td>
                            <td>2024-10-13</td>
                            <td>Aceptada</td>
                            <td><span class="semáforo verde"></span></td>
                        </tr>
                        <tr data-color="amarillo">
                            <td>
                                <a href="#" title="Consultar" onclick="mostrarDetallesSolicitud('amarillo');">
                                    <img src="iconos/consultar.svg" alt="Consultar" width="24" height="24">
                                </a>
                            </td>
                            <td>20241122_04</td>
                            <td>Maria García</td>
                            <td>Ausencia Familiar</td>
                            <td>2024-10-15</td>
                            <td>2024-10-17</td>
                            <td>Pendiente</td>
                            <td><span class="semáforo amarillo"></span></td>
                        </tr>
                        <tr data-color="rojo">
                            <td>
                                <a href="#" title="Consultar" onclick="mostrarDetallesSolicitud('rojo');">
                                    <img src="iconos/consultar.svg" alt="Consultar" width="24" height="24">
                                </a>
                            </td>
                            <td>20241124_05</td>
                            <td>Carlos Díaz</td>
                            <td>Mudanza</td>
                            <td>2024-10-20</td>
                            <td>2024-10-23</td>
                            <td>Denegada</td>
                            <td><span class="semáforo rojo"></span></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Sección para consultar una solicitud -->
            <section id="detalles-solicitud" class="content-section" style="display: none;">
                <h2>Detalles de la Solicitud</h2>
                <form>
                    <div>
                        <label>Asunto de la Ausencia:</label>
                        <input type="text" id="asunto" name="asunto" required>
                    </div>
                    <div>
                        <label>Justificación de la Ausencia:</label>
                        <textarea name="justificacion" rows="4" required></textarea>
                    </div>
                    <div>
                        <label>Fecha de Inicio:</label>
                        <input type="date" name="fecha-inicio" required>
                    </div>
                    <div>
                        <label>Fecha de Fin:</label>
                        <input type="date" name="fecha-fin" required>
                    </div>
                    <div>
                        <label>Subir Justificante:</label>
                        <input type="file" name="justificante" accept=".pdf, .jpg, .png" required>
                    </div>
                    <div>
                        <label>Observaciones:</label>
                        <textarea name="observaciones" rows="4"></textarea>
                    </div>
                    <div>
                        <label>Material de Guardia:</label>
                        <input type="file" name="material" accept=".pdf, .jpg, .png">
                    </div>
                    
                    <!-- Iconos de acción estilizados según el color del semáforo -->
                    <div id="botones-acciones" class="acciones-contenedor">
                        <a href="#" title="Volver a la Lista" onclick="mostrarSeccion('ver-lista')" class="accion-icono">
                            <img src="iconos/volver.svg" alt="Volver a la Lista">
                        </a>
                    </div>
                </form>
            </section>
            
            <script>
                // Ocultar el mensaje de bienvenida
                function ocultarBienvenida() {
                    const bienvenida = document.getElementById('bienvenida');
                    bienvenida.style.display = 'none'; // Oculta el div de bienvenida
                }

                // Función para mostrar la sección correspondiente
                function mostrarSeccion(seccionId) {
                    const secciones = document.querySelectorAll('.content-section');
                    secciones.forEach(seccion => seccion.style.display = 'none');
                    document.getElementById(seccionId).style.display = 'block';
                }
            
                // Función para consultar la solicitud y mostrar iconos según el color del semáforo
                function mostrarDetallesSolicitud(color) {
                    mostrarSeccion('detalles-solicitud');
            
                    const botonesAcciones = document.getElementById('botones-acciones');
                    botonesAcciones.innerHTML = `
                        <a href="#" title="Volver a la Lista" onclick="mostrarSeccion('ver-lista')" class="accion-icono">
                            <img src="iconos/volver.svg" alt="Volver a la Lista">
                        </a>
                    `;
            
                    if (color === 'verde' || color === 'amarillo') {
                        botonesAcciones.innerHTML += `
                            <a href="#" title="Aceptar" class="accion-icono">
                                <img src="iconos/aceptar.svg" alt="Aceptar">
                            </a>
                            <a href="#" title="Rechazar" class="accion-icono">
                                <img src="iconos/rechazar.svg" alt="Rechazar">
                            </a>
                        `;
                    } else if (color === 'rojo') {
                        botonesAcciones.innerHTML += `
                            <a href="#" title="Borrar" class="accion-icono">
                                <img src="iconos/borrar.svg" alt="Borrar">
                            </a>
                            <a href="#" title="Modificar" class="accion-icono">
                                <img src="iconos/modificar.svg" alt="Modificar">
                            </a>
                        `;
                    }
                }
            </script>        
    </body>
</html>
